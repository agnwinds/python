<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module regression</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>regression</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/Users/long/Python/py_progs/regression.py">/Users/long/Python/py_progs/regression.py</a></font></td></tr></table>
    <p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Space&nbsp;Telescope&nbsp;Science&nbsp;Institute<br>
&nbsp;<br>
Synopsis:&nbsp;&nbsp;<br>
&nbsp;<br>
Execute&nbsp;a&nbsp;series&nbsp;of&nbsp;short&nbsp;python&nbsp;runs&nbsp;to&nbsp;test&nbsp;whether&nbsp;a&nbsp;version&nbsp;<br>
of&nbsp;python&nbsp;is&nbsp;working.<br>
&nbsp;<br>
&nbsp;<br>
Command&nbsp;line&nbsp;usage&nbsp;(if&nbsp;any):<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;usage:&nbsp;regression.py&nbsp;[-np&nbsp;3&nbsp;-pf_dir&nbsp;test&nbsp;-out_dir&nbsp;foo]&nbsp;version&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;executable&nbsp;of&nbsp;python<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-np&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;number&nbsp;of&nbsp;processors&nbsp;with&nbsp;which&nbsp;to&nbsp;run&nbsp;(default&nbsp;3)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-pf_dir&nbsp;test&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;directory&nbsp;containing&nbsp;all&nbsp;of&nbsp;the&nbsp;.pf&nbsp;files&nbsp;which&nbsp;will&nbsp;be&nbsp;run<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;defaults&nbsp;is&nbsp;$PYTHON/examples/regress.&nbsp;&nbsp;One&nbsp;does&nbsp;not&nbsp;need<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;to&nbsp;the&nbsp;directory.&nbsp;&nbsp;The&nbsp;routine&nbsp;doit<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;searches&nbsp;the&nbsp;current&nbsp;workind&nbsp;directory&nbsp;for&nbsp;the&nbsp;directory&nbsp;and&nbsp;then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;looks&nbsp;in&nbsp;$PYTHON/examples/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-out_dir&nbsp;foo&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;directory&nbsp;(below&nbsp;the&nbsp;current&nbsp;working&nbsp;directory)&nbsp;where&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tests&nbsp;will&nbsp;run.&nbsp;&nbsp;The&nbsp;defauld&nbsp;is&nbsp;constructed&nbsp;for&nbsp;the&nbsp;version<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;data<br>
&nbsp;<br>
Description:&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;basic&nbsp;process&nbsp;is&nbsp;as&nbsp;follows<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;&nbsp;Create&nbsp;a&nbsp;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;work&nbsp;and&nbsp;intialize&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;&nbsp;Copy&nbsp;all&nbsp;of&nbsp;the&nbsp;relevant&nbsp;.pf&nbsp;files&nbsp;to&nbsp;this&nbsp;directory<br>
&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;&nbsp;Switch&nbsp;to&nbsp;the&nbsp;working&nbsp;directory&nbsp;and&nbsp;run&nbsp;all&nbsp;the&nbsp;models,&nbsp;performing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;some&nbsp;basic&nbsp;checks&nbsp;<br>
&nbsp;<br>
Primary&nbsp;routines:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;doit:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Internal&nbsp;routine&nbsp;which&nbsp;runs&nbsp;python&nbsp;on&nbsp;all&nbsp;of&nbsp;the&nbsp;pf&nbsp;files&nbsp;of&nbsp;interest.&nbsp;&nbsp;Use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;if&nbsp;working&nbsp;in&nbsp;a&nbsp;python&nbsp;shell<br>
&nbsp;&nbsp;&nbsp;&nbsp;steer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;routine&nbsp;to&nbsp;parse&nbsp;the&nbsp;command&nbsp;lineh<br>
&nbsp;&nbsp;&nbsp;&nbsp;check_one:&nbsp;&nbsp;A&nbsp;routine&nbsp;which&nbsp;oversees&nbsp;checking&nbsp;of&nbsp;the&nbsp;runs<br>
&nbsp;<br>
Notes:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Regression&nbsp;here&nbsp;means&nbsp;to&nbsp;run&nbsp;a&nbsp;series&nbsp;of&nbsp;models.&nbsp;These&nbsp;routines&nbsp;do&nbsp;not&nbsp;compare&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;models&nbsp;to&nbsp;earlier&nbsp;runs<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;possible&nbsp;to&nbsp;add&nbsp;special&nbsp;tests&nbsp;for&nbsp;regression,&nbsp;either&nbsp;to&nbsp;because&nbsp;models&nbsp;must&nbsp;be&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;run&nbsp;in&nbsp;a&nbsp;certain&nbsp;order&nbsp;or&nbsp;because&nbsp;special&nbsp;options&nbsp;must&nbsp;be&nbsp;used.&nbsp;&nbsp;These&nbsp;should<br>
&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;added&nbsp;in&nbsp;a&nbsp;special&nbsp;section&nbsp;of&nbsp;doit,&nbsp;and&nbsp;should&nbsp;be&nbsp;self-contained.&nbsp;&nbsp;<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
History:<br>
&nbsp;<br>
170903&nbsp;ksl&nbsp;Coding&nbsp;begun<br>
180225&nbsp;ksl&nbsp;nsh&nbsp;had&nbsp;added&nbsp;a&nbsp;special&nbsp;test&nbsp;for&nbsp;hydro.&nbsp;&nbsp;This&nbsp;is&nbsp;useful&nbsp;in&nbsp;the&nbsp;sense&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;allows&nbsp;one&nbsp;to&nbsp;deal&nbsp;with&nbsp;situations&nbsp;where&nbsp;several&nbsp;runs&nbsp;must&nbsp;be&nbsp;carreid&nbsp;out<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sequentially&nbsp;but&nbsp;but&nbsp;the&nbsp;mechanism&nbsp;that&nbsp;he&nbsp;chose&nbsp;makes<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;difficult&nbsp;to&nbsp;add&nbsp;new&nbsp;tests,&nbsp;because&nbsp;the&nbsp;standard&nbsp;and&nbsp;speciial&nbsp;tests&nbsp;are&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;sufficently&nbsp;isolated&nbsp;from&nbsp;one&nbsp;another.</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="astropy.io.ascii.html">astropy.io.ascii</a><br>
<a href="balmer_decrement.html">balmer_decrement</a><br>
<a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="py_error.html">py_error</a><br>
<a href="regression_check.html">regression_check</a><br>
</td><td width="25%" valign=top><a href="shutil.html">shutil</a><br>
<a href="subprocess.html">subprocess</a><br>
<a href="sys.html">sys</a><br>
</td><td width="25%" valign=top><a href="time.html">time</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-check_one"><strong>check_one</strong></a>(xfile, root)</dt><dd><tt>Perform&nbsp;some&nbsp;checks&nbsp;on&nbsp;what&nbsp;happened&nbsp;in&nbsp;a&nbsp;run</tt></dd></dl>
 <dl><dt><a name="-doit"><strong>doit</strong></a>(version='py', pf_dir='', out_dir='', np=3, outputfile='Summary.txt')</dt><dd><tt>Test&nbsp;a&nbsp;specific&nbsp;version&nbsp;of&nbsp;python&nbsp;against&nbsp;a&nbsp;series&nbsp;of&nbsp;models<br>
&nbsp;<br>
Description:<br>
&nbsp;<br>
Notes:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;routine&nbsp;looks&nbsp;for&nbsp;the&nbsp;input&nbsp;directory&nbsp;first&nbsp;as&nbsp;a&nbsp;subdirectory<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;directory&nbsp;from&nbsp;which&nbsp;regression&nbsp;is&nbsp;run,&nbsp;and&nbsp;then&nbsp;in&nbsp;$PYTHON/examples/<br>
&nbsp;<br>
History:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;170903&nbsp;&nbsp;ksl&nbsp;Bagan&nbsp;work<br>
&nbsp;&nbsp;&nbsp;&nbsp;170904&nbsp;&nbsp;ksl&nbsp;Updated&nbsp;how&nbsp;routine&nbsp;looks&nbsp;for&nbsp;input&nbsp;directories<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;attempted&nbsp;to&nbsp;get&nbsp;a&nbsp;more&nbsp;readable&nbsp;stderr&nbsp;output<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Also,&nbsp;eliminted&nbsp;pf&nbsp;files&nbsp;with&nbsp;the&nbsp;extension&nbsp;.out.pf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;because&nbsp;these&nbsp;are&nbsp;mostlikely&nbsp;duplicates</tt></dd></dl>
 <dl><dt><a name="-py_hydro"><strong>py_hydro</strong></a>(version, pf_dir, outputfile)</dt><dd><tt>This&nbsp;is&nbsp;a&nbsp;self&nbsp;contained&nbsp;script&nbsp;to&nbsp;perform&nbsp;specialised&nbsp;tests&nbsp;of<br>
the&nbsp;py_hydro&nbsp;models.&nbsp;We&nbsp;need&nbsp;to&nbsp;run&nbsp;on&nbsp;one&nbsp;processor,&nbsp;otherwise<br>
the&nbsp;test&nbsp;of&nbsp;the&nbsp;heatcool&nbsp;wont&nbsp;work&nbsp;-&nbsp;but&nbsp;its&nbsp;quick!<br>
&nbsp;<br>
Notes:<br>
&nbsp;<br>
This&nbsp;routine&nbsp;is&nbsp;run&nbsp;from&nbsp;within&nbsp;the&nbsp;current&nbsp;working&nbsp;directory,<br>
which&nbsp;is&nbsp;the&nbsp;directory&nbsp;created&nbsp;earlier&nbsp;be&nbsp;doit<br>
&nbsp;<br>
&nbsp;<br>
History<br>
&nbsp;<br>
1801&nbsp;&nbsp;nsh<br>
1802&nbsp;&nbsp;ksl&nbsp;Modified&nbsp;this&nbsp;routine&nbsp;so&nbsp;that&nbsp;it&nbsp;is&nbsp;more&nbsp;standalone<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;previously.&nbsp;&nbsp;Special&nbsp;regression&nbsp;tests&nbsp;need&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;isolated&nbsp;from&nbsp;the&nbsp;internal&nbsp;logic&nbsp;of&nbsp;doit&nbsp;so&nbsp;they<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;be&nbsp;added/removed&nbsp;easily.</tt></dd></dl>
 <dl><dt><a name="-run_cmds"><strong>run_cmds</strong></a>(commands, root_names, outputfile)</dt></dl>
 <dl><dt><a name="-steer"><strong>steer</strong></a>(argv)</dt><dd><tt>This&nbsp;is&nbsp;just&nbsp;a&nbsp;steering&nbsp;routine&nbsp;so&nbsp;that&nbsp;switches&nbsp;can&nbsp;be&nbsp;processed&nbsp;<br>
from&nbsp;the&nbsp;command&nbsp;line</tt></dd></dl>
 <dl><dt><a name="-sum_errors"><strong>sum_errors</strong></a>(root='1d_sn')</dt><dd><tt>This&nbsp;sums&nbsp;the&nbsp;errors&nbsp;from&nbsp;various&nbsp;threads<br>
&nbsp;<br>
Note&nbsp;that&nbsp;this&nbsp;effectively&nbsp;duplicates&nbsp;a&nbsp;routine<br>
py_error&nbsp;which&nbsp;James&nbsp;wrote,&nbsp;but&nbsp;in&nbsp;Python&nbsp;3</tt></dd></dl>
</td></tr></table>
</body></html>